{% extends 'base.html' %}
{% load thumbnail %}

{% block title %} {{ news_article.title}} {% endblock %}

{% block meta %} 
    <meta name="keywords" content="{% if news_article.keywords %}{{ news_article.keywords }}{% endif %}" />
    <meta name="description" content="{% if news_article.description %}{{ news_article.description }}{% endif %}">
{% endblock %}

{% block breadcrumb %}
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><i class="fas fa-home"></i> Главная</li>
        <li class="breadcrumb-item" aria-current="page">Пресс-центр</li>
        <li class="breadcrumb-item" aria-current="page">{{ news_article.get_type_display }}</li>
        <li class="breadcrumb-item active" aria-current="page">{{ news_article.title|truncatewords:4 }}</li>
    </ol>
</nav>
{% endblock breadcrumb %}

{% block main %}
<div class="row">
    <div class="col-9 news">
        <div class="news__created"><i class="far fa-calendar-alt"></i> {{ news_article.publish }}</div>
        <div class="news__header">
            <span class="news__header-text">{{ news_article.title }}</span>
        </div>
        <div class="row float-left">
            <div class="col-12">
                {% if news_article.image %}
                <a href="/media/{{ news_article.image }}" rel="gallery" class="swipebox" title="{{ news_article.title }}">
                    {% thumbnail news_article.image "400" crop="center" as im %}
                    <img class="rounded news__post-imgs" alt="{{ news_article.title}}" src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
                    {% endthumbnail %}
                </a>
                {% if news_article.imagesign %}
                <div class="news__imagesign">
                    {{ news_article.imagesign }}
                </div>
                {% endif %}
                {% endif %}
            </div>
        </div>
        {# Контент #}
        <div class="news__article-content text-justify">
            {{ news_article.content|safe }}
        </div>
        {# Фотогалерея #}
        <div class="news__photo-gallery">
            {% for photogallery in news_article.photogallery_news.all %}
            {# Главное фото фотогалереи #}
            <div class="photo float-left">
                <a href="/media/{{ photogallery.image }}" rel="gallery" class="swipebox" title="{{ photogallery_article.title}}">
                    {% thumbnail photogallery.image "200x150" crop="center" as im %}
                    <img src="{{ im.url }}" width="{{ im.width }}" alt="{{ photogallery.title }}">
                    {% endthumbnail %}
                </a>
            </div>
            {% for imgs in photogallery.photogallery_images.all %}
            {# Фотографии фотогалереи #}
            <div class="photo float-left">
                <a href="/media/{{ imgs.image }}" rel="gallery" class="swipebox" title="{{ photogallery_article.title}}">
                    {% thumbnail imgs.image "200x150" crop="center" as im %}
                    <img src="{{ im.url }}" width="{{ im.width }}" alt="{{ photogallery.title }}">
                    {% endthumbnail %}
                </a>
            </div>
            {% endfor %}
            {% endfor %}
        </div>
        {# Видео #}
        {% for videonews in news_article.videonews.all %}
            {% if videonews.video %}
            {# Если видео загружено физически #}
                <video width="100%" height="500" controls>
                    <source src="/media/{{ videonews.video }}" type="video/mp4">
                    {# <!-- WebM/VP8 для Firefox4, Opera, и Chrome --> #}
                    <source src="/media/{{ videonews.video }}" type="video/webm">
                    {# <!-- Ogg/Vorbis для старых версий браузеров Firefox и Opera --> #}
                    <source src="/media/{{ videonews.video }}" type="video/ogg">
                    <object data="/media/{{ videonews.video }}" type="application/x-shockwave-flash">
                    {# <!-- добавляем видеоконтент для устаревших браузеров, в которых нет поддержки элемента video --> #}
                        <param name="movie" value="/media/{{ videonews.video }}">
                    </object>
                    <br>
                    Для воспроизведения видео требуется браузер с поддержкой HTML5 или Adobe Flash
                    <br>
                    Если вы не можете просмотреть видео на этой странице, скачайте его.
                    <br>
                    <a href="/media/{{ videonews.video }}" download="download" target="_blank">Скачать видео</a>
                </video>
            {% endif %}
            {% if videonews.cap %}
            {# Если видео с video.cap.ru #}
                <video width="100%" height="500" controls>
                    <source src="{{ videonews.cap }}" type="video/mp4">
                    {# <!-- WebM/VP8 для Firefox4, Opera, и Chrome --> #}
                    <source src="{{ videonews.cap }}" type="video/webm">
                    {# <!-- Ogg/Vorbis для старых версий браузеров Firefox и Opera --> #}
                    <source src="{{ videonews.cap }}" type="video/ogg">
                    <object data="{{ videonews.cap }}" type="application/x-shockwave-flash">
                    {# <!-- добавляем видеоконтент для устаревших браузеров, в которых нет поддержки элемента video --> #}
                        <param name="movie" value="{{ videonews.cap }}">
                    </object>
                    <br>
                    Для воспроизведения видео требуется браузер с поддержкой HTML5 или Adobe Flash
                    <br>
                    Если вы не можете просмотреть видео на этой странице, скачайте его.
                    <br>
                    <a href="{{ videonews.cap }}" download="download" target="_blank">Скачать видео</a>
                </video>
            {% endif %}
            {% if videonews.youtube %}
                <iframe width="100%" height="500" src="https://www.youtube.com/embed/{{ videonews.youtube}}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"></iframe>
            {% endif %}
        {% empty %}
        {% endfor %}
        <div class="clearfix"></div>
        {% if news_article.source %}
        <div class="news__source">Первоисточник: {{ news_article.source }} </div>
        {% endif %}
        <div class="news_share">
            <script src="https://yastatic.net/es5-shims/0.0.2/es5-shims.min.js"></script>
            <script src="https://yastatic.net/share2/share.js"></script>
            Поделиться:
            <div class="ya-share2" data-services="vkontakte,facebook,odnoklassniki,twitter,pocket,viber,whatsapp,skype,telegram"></div>
        </div>
        <a href="#" class="btn btn-danger" onclick="window.print()">Распечатать</a>
    </div>
    {% include "include_banners.html" %}
</div>
{% endblock %}